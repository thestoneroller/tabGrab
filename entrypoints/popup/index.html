<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TabGrab</title>
    <meta name="manifest.type" content="browser_action" />
    <link rel="stylesheet" href="../../assets/tailwind.css" />
  </head>
  <body
    class="bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100"
  >
    <div id="app" class="w-96 max-h-[580px] flex flex-col p-4">
      <header class="flex justify-between items-center mb-4">
        <div class="flex items-end gap-1">
          <!-- TabGrab Logo -->
          <svg width="28" height="28" viewBox="0 0 128 128">
            <g
              transform="matrix(0.10071902,0,0,0.10125363,-60.547828,-26.029515)"
              style="display: inline"
            >
              <g
                transform="matrix(0.83377916,0,0,0.82927371,205.54652,151.80103)"
              >
                <g
                  style="
                    color: #000000;
                    display: inline;
                    fill: none;
                    stroke-width: 1;
                  "
                  id="g5"
                  transform="matrix(34.027314,0,0,37.862316,1094.539,1203.8226)"
                >
                  <path
                    style="
                      display: inline;
                      fill: #6366f1;
                      fill-opacity: 1;
                      stroke-width: 0.668132;
                      stroke-linejoin: round;
                    "
                    d="m 29.934547,105.10742 c -2.510122,-0.60876 -4.79069,-2.51802 -6.054719,-5.06894 -1.302661,-2.628879 -1.27016,-1.98398 -1.207317,-23.956117 0.06109,-21.358036 -0.01284,-19.919304 1.150479,-22.389685 1.048107,-2.22572 3.062629,-4.110384 5.284745,-4.944085 0.977619,-0.366786 1.364433,-0.390691 7.253439,-0.448266 l 6.220748,-0.06082 0.06711,-8.6076 c 0.07415,-9.510991 0.05815,-9.362438 1.269529,-11.78958 0.804973,-1.612868 1.775145,-2.713435 3.241605,-3.677295 2.4114,-1.584939 -0.0876,-1.443069 26.362241,-1.496601 25.630389,-0.05187 24.353515,-0.09904 26.533203,0.980185 2.34094,1.159069 4.48009,4.201569 5.04135,7.170271 0.39083,2.067274 0.39083,38.648651 0,40.715925 -0.75446,3.990648 -3.733,7.251442 -7.303953,7.996121 -0.572375,0.11936 -3.16828,0.195352 -6.67332,0.195352 h -5.736541 v 8.027789 c 0,9.203834 -0.06874,9.875628 -1.257185,12.286396 -1.294838,2.62658 -3.702266,4.5818 -6.30872,5.12368 -1.425433,0.29635 -46.64775,0.24277 -47.88269,-0.0567 z m 47.589345,-6.267977 c 0.790137,-0.358909 1.598328,-1.220063 1.964019,-2.092721 0.193424,-0.461575 0.238376,-3.303477 0.238376,-15.070213 V 67.175142 H 62.305005 c -19.099364,0 -17.931549,0.06556 -18.878476,-1.059801 -0.250914,-0.298192 -0.538368,-0.838008 -0.63879,-1.19959 -0.105292,-0.379116 -0.183003,-2.734101 -0.18357,-5.562977 l -9.87e-4,-4.905553 -5.701048,0.0039 c -5.163349,0.0035 -5.768919,0.03471 -6.42066,0.330722 -0.863052,0.39199 -1.71869,1.379647 -1.995425,2.303307 -0.286999,0.957918 -0.286999,38.490763 0,39.44868 0.276735,0.92366 1.132373,1.911317 1.995425,2.303307 0.6881,0.312527 1.718205,0.32684 23.523805,0.32684 21.746727,0 22.837321,-0.01505 23.518613,-0.324516 z m 19.975766,-25.63262 c 0.790137,-0.35891 1.598328,-1.220063 1.964019,-2.092721 0.193424,-0.461575 0.238376,-3.303477 0.238376,-15.070213 V 41.542522 H 81.520196 63.33834 l -0.584413,-0.397747 c -0.321426,-0.218761 -0.750825,-0.622176 -0.954219,-0.896477 -0.351315,-0.473792 -0.374227,-0.769924 -0.458196,-5.92202 l -0.08839,-5.423289 -4.831819,-0.04706 c -3.140606,-0.03059 -5.089656,0.02187 -5.568466,0.149866 -0.927318,0.247901 -2.08116,1.412489 -2.376665,2.398801 -0.156633,0.522793 -0.216136,2.942263 -0.216136,8.788419 v 8.067024 h 14.310211 c 9.736168,0 14.609637,0.06225 15.246989,0.194756 2.606454,0.541883 5.013882,2.497096 6.30872,5.123682 1.184849,2.403473 1.257185,3.10023 1.257185,12.109617 v 7.851011 l 5.701048,-0.0039 c 5.148619,-0.0035 5.770276,-0.03533 6.415468,-0.328398 z M 61.164735,57.717589 v -3.270368 h -6.452349 -6.452349 v 3.270368 3.270369 h 6.452349 6.452349 z m 18.561552,1.496924 c 0,-1.934197 -0.172329,-2.550076 -0.982364,-3.510817 -1.000144,-1.186219 -1.34326,-1.248252 -6.928392,-1.252593 l -4.993942,-0.0039 v 3.270368 3.270369 h 6.452349 6.452349 z m 0.176777,-27.129544 v -3.270368 h -6.540737 -6.540738 v 3.270368 3.270369 h 6.540738 6.540737 z m 19.798989,1.470027 c 0,-1.458758 -0.06936,-1.94362 -0.365561,-2.555494 -0.456956,-0.943944 -1.365936,-1.755582 -2.237063,-1.997496 -0.400014,-0.111084 -2.882687,-0.185829 -6.192016,-0.18642 l -5.524271,-9.85e-4 v 3.270368 3.270369 h 7.159456 7.159455 z"
                    id="path1"
                    transform="matrix(0.34995307,0,0,0.31454611,-18.222468,-28.441961)"
                  />
                </g>
              </g>
            </g>
          </svg>
          <p class="text-xl font-serif tracking-wider">
            Tab<span class="font-serif italic">Grab</span>
          </p>
          <p class="text-xs pb-1 text-neutral-500 dark:text-neutral-400">
            by
            <a
              href="https://x.com/thestoneroller"
              target="_blank"
              rel="noopener noreferrer"
              title="Twitter @thestoneroller"
              class="text-neutral-500 dark:text-neutral-400 italic"
            >
              @thestoneroller
            </a>
          </p>
        </div>
        <div class="flex items-center relative">
          <a
            href="https://chromewebstore.google.com/detail/tab-grab/jcblcjolcojmfopefcighfmkkefbaofg/reviews"
            target="_blank"
            rel="noopener noreferrer"
            aria-label="Feedback"
            title="Leave a review or send feedback!"
            class="w-8 h-8 cursor-pointer flex items-center justify-center rounded-full transition-colors group duration-200"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-message-circle-heart-icon group-hover:stroke-rose-500 w-5 h-5 stroke-neutral-900 transition-colors duration-200 dark:stroke-neutral-100"
            >
              <path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z" />
              <path
                d="M15.8 9.2a2.5 2.5 0 0 0-3.5 0l-.3.4-.35-.3a2.42 2.42 0 1 0-3.2 3.6l3.6 3.5 3.6-3.5c1.2-1.2 1.1-2.7.2-3.7"
              />
            </svg>
          </a>
          <button
            id="theme-toggle-button"
            aria-label="Toggle dark mode"
            class="w-8 h-8 cursor-pointer flex items-center justify-center rounded-full group transition-colors duration-200"
          >
            <!-- Sun Icon -->
            <svg
              class="sun-icon hidden stroke-neutral-900 group-hover:stroke-amber-500 dark:stroke-neutral-100 w-5 h-5 transition-colors duration-200"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="12" cy="12" r="5"></circle>
              <line x1="12" y1="1" x2="12" y2="3"></line>
              <line x1="12" y1="21" x2="12" y2="23"></line>
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
              <line x1="1" y1="12" x2="3" y2="12"></line>
              <line x1="21" y1="12" x2="23" y2="12"></line>
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
            <!-- Moon Icon -->
            <svg
              class="moon-icon cursor-pointer stroke-neutral-900 group-hover:stroke-indigo-500 dark:stroke-neutral-100 w-5 h-5"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
          </button>
        </div>
      </header>

      <div class="mb-4 relative">
        <input
          type="text"
          id="search-input"
          placeholder="Search tabs by title or URL..."
          class="w-full px-4 py-2 pl-8 text-sm bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700 rounded-xl focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500/20 text-neutral-900 dark:text-neutral-100 placeholder-neutral-500 dark:placeholder-neutral-400"
        />
        <svg
          class="absolute left-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-neutral-500 dark:text-neutral-400"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <circle cx="11" cy="11" r="8"></circle>
          <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
      </div>

      <div class="flex items-center w-full justify-between mb-4 relative">
        <div class="flex items-center gap-1">
          <button
            id="filter-all"
            class="filter-button cursor-pointer flex items-center gap-2 px-3 py-1 text-sm rounded-lg transition-colors duration-200"
          >
            All Tabs
            <span
              id="count-all"
              class="bg-neutral-200 dark:bg-neutral-700 text-xs font-medium px-2 py-0.5 rounded-full"
              >0</span
            >
          </button>
          <button
            id="filter-pinned"
            class="filter-button cursor-pointer flex items-center gap-2 px-3 py-1 text-sm rounded-lg transition-colors duration-200"
          >
            Pinned
            <span
              id="count-pinned"
              class="bg-neutral-200 dark:bg-neutral-700 text-xs font-medium px-2 py-0.5 rounded-full"
              >0</span
            >
          </button>
        </div>
        <button
          id="filter-button"
          aria-label="Open filter menu"
          class="w-8 h-8 cursor-pointer flex items-center justify-center rounded-full hover:bg-neutral-200 dark:hover:bg-neutral-800 transition-colors duration-200"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5 stroke-neutral-900 dark:stroke-neutral-100"
            fill="currentColor"
            viewBox="0 0 256 256"
          >
            <path
              d="M40,88H73a32,32,0,0,0,62,0h81a8,8,0,0,0,0-16H135a32,32,0,0,0-62,0H40a8,8,0,0,0,0,16Zm64-24A16,16,0,1,1,88,80,16,16,0,0,1,104,64ZM216,168H199a32,32,0,0,0-62,0H40a8,8,0,0,0,0,16h97a32,32,0,0,0,62,0h17a8,8,0,0,0,0-16Zm-48,24a16,16,0,1,1,16-16A16,16,0,0,1,168,192Z"
            ></path>
          </svg>
        </button>

        <div
          id="filter-menu"
          class="absolute z-50 right-0 top-full mt-2 w-48 bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-600 rounded-xl shadow-lg hidden"
          role="menu"
          aria-orientation="vertical"
          aria-labelledby="filter-button"
        >
          <div class="p-4 space-y-4">
            <div class="flex items-center justify-between">
              <label
                for="group-domain-toggle"
                class="cursor-pointer select-none text-sm text-neutral-900 dark:text-neutral-100"
                >Group Domains</label
              >
              <button
                type="button"
                id="group-domain-toggle"
                class="relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none bg-neutral-200 dark:bg-neutral-700"
                role="switch"
                aria-checked="false"
              >
                <span class="sr-only">Group by domain</span>
                <span
                  aria-hidden="true"
                  class="pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out translate-x-0"
                ></span>
              </button>
            </div>
            <div
              id="hide-pinned-setting"
              class="flex items-center justify-between opacity-100 transition-opacity duration-200"
            >
              <label
                for="hide-pinned-toggle"
                id="hide-pinned-label"
                class="cursor-pointer select-none text-sm text-neutral-900 dark:text-neutral-100"
              >
                Hide Pinned
              </label>
              <button
                type="button"
                id="hide-pinned-toggle"
                class="relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none bg-neutral-200 dark:bg-neutral-700"
                role="switch"
                aria-checked="false"
              >
                <span class="sr-only">Hide Pinned Tabs</span>
                <span
                  aria-hidden="true"
                  class="pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out translate-x-0"
                ></span>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="flex justify-between items-center mb-4 text-sm">
        <div class="flex items-center gap-4">
          <div class="flex items-center">
            <input
              type="checkbox"
              id="select-all-checkbox"
              class="sr-only peer"
            />
            <div
              id="select-all-visual"
              class="w-4 h-4 border-2 border-neutral-300 dark:border-neutral-700 rounded peer-checked:bg-indigo-500 peer-checked:border-indigo-500 relative peer-checked:after:content-[''] peer-checked:after:absolute peer-checked:after:left-[4px] peer-checked:after:top-[0px] peer-checked:after:w-[5px] peer-checked:after:h-[9px] peer-checked:after:border-white peer-checked:after:border-r-2 peer-checked:after:border-b-2 peer-checked:after:rotate-45 cursor-pointer"
            ></div>
            <label
              for="select-all-checkbox"
              class="ml-2 text-sm cursor-pointer select-none text-neutral-900 dark:text-neutral-100"
            >
              Select All
            </label>
          </div>
        </div>
        <div
          class="text-xs px-2 py-1 bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400 rounded-full"
        >
          <span id="selection-count">0</span> selected
        </div>
      </div>

      <div
        id="tabs-container"
        class="flex-1 overflow-y-auto space-y-2 mb-4"
      ></div>

      <!-- Footer Actions -->
      <footer class="flex justify-end items-center">
        <!-- Integrated Copy Button Group -->
        <div class="flex relative w-full justify-center gap-px">
          <!-- Main Copy Action Button -->
          <button
            id="copy-selected"
            disabled
            class="px-4 py-2 w-full text-sm border-y border-l justify-center border-indigo-500 bg-indigo-500 text-white rounded-l-lg flex items-center gap-2 hover:bg-indigo-600 dark:hover:bg-indigo-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-indigo-300 dark:disabled:bg-indigo-500 disabled:border-indigo-400 dark:disabled:border-indigo-600"
          >
            <svg
              viewBox="0 0 24 24"
              width="16"
              height="16"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path
                d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"
              ></path>
            </svg>
            <span id="copy-button-text" class="text-center">Copy URLs</span>
          </button>
          <!-- Dropdown Toggle Button -->
          <button
            id="copy-format-toggle"
            aria-haspopup="true"
            aria-expanded="false"
            disabled
            class="px-2 py-2 text-sm border-y border-r border-indigo-500 bg-indigo-500 text-white rounded-r-lg flex items-center hover:bg-indigo-600 dark:hover:bg-indigo-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-indigo-300 dark:disabled:bg-indigo-500 disabled:border-indigo-400 dark:disabled:border-indigo-500"
          >
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
              <path
                fill-rule="evenodd"
                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                clip-rule="evenodd"
              />
            </svg>
          </button>
          <!-- Dropdown Menu -->
          <div
            id="copy-format-menu"
            class="absolute right-0 bottom-full mb-2 w-48 bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-600 rounded-xl shadow-lg z-10 hidden"
            role="menu"
            aria-orientation="vertical"
            aria-labelledby="copy-format-toggle"
          >
            <div role="none" class="space-y-px">
              <a
                href="#"
                class="copy-format-item flex justify-between items-center px-4 py-2 text-sm text-neutral-900 dark:text-neutral-100 hover:bg-neutral-100 dark:hover:bg-neutral-700/50"
                role="menuitem"
                data-format="plain"
              >
                Plain URLs
                <span class="format-checkmark hidden ml-2">
                  <svg
                    class="w-4 h-4 text-indigo-600"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                      clip-rule="evenodd"
                    ></path>
                  </svg>
                </span>
              </a>
              <a
                href="#"
                class="copy-format-item flex justify-between items-center px-4 py-2 text-sm text-neutral-900 dark:text-neutral-100 hover:bg-neutral-100 dark:hover:bg-neutral-700/50"
                role="menuitem"
                data-format="markdown"
              >
                Markdown List
                <span class="format-checkmark hidden ml-2">
                  <svg
                    class="w-4 h-4 text-indigo-600"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                      clip-rule="evenodd"
                    ></path>
                  </svg>
                </span>
              </a>
              <a
                href="#"
                class="copy-format-item flex justify-between items-center px-4 py-2 text-sm text-neutral-900 dark:text-neutral-100 hover:bg-neutral-100 dark:hover:bg-neutral-700/50"
                role="menuitem"
                data-format="json"
              >
                JSON Array
                <span class="format-checkmark hidden ml-2">
                  <svg
                    class="w-4 h-4 text-indigo-600"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                      clip-rule="evenodd"
                    ></path>
                  </svg>
                </span>
              </a>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <script type="module" src="./main.ts"></script>
  </body>
</html>
